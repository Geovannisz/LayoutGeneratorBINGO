# Gerador de Layouts para o BINGO
Site para geração de layouts para o BINGO usando o OSKAR. Acesse:

https://geovannisz.github.io/LayoutGeneratorBINGO/

O site 'Gerador de Layouts de Antenas BINGO' é uma aplicação web interativa projetada para auxiliar no design e simulação de arranjos de antenas para o projeto BINGO. A interface principal é dividida em seções distintas, cada uma focada em um aspecto específico do processo de design e análise.

Na parte superior da página, um cabeçalho apresenta o título da aplicação e um botão de alternância para o modo escuro, permitindo ao usuário ajustar a aparência da interface para melhor conforto visual. A aplicação é estruturada em torno de um container principal que organiza as diferentes ferramentas e visualizações.

A primeira grande seção funcional é o 'Gerador de Layout'. Esta ferramenta permite ao usuário criar diversos tipos de arranjos de antenas (tiles). O usuário pode selecionar entre múltiplos algoritmos de layout, incluindo 'Grid', 'Espiral', 'Anéis', 'Losango', 'Grade Hexagonal', 'Phyllotaxis', 'Circular Manual' e 'Aleatório'. Para cada tipo de layout selecionado, um conjunto de parâmetros dinâmicos é apresentado, permitindo um controle fino sobre as características do arranjo, como número de elementos, espaçamento, fatores de escala e outros atributos específicos do algoritmo. Uma opção para 'Mostrar Colisões' permite visualizar sobreposições entre os tiles. Após configurar os parâmetros, o usuário pode clicar nos botões 'Gerar Layout' para criar o arranjo especificado ou 'Gerar Aleatório' para obter uma configuração randômica. O layout resultante é exibido visualmente em uma área de canvas dedicada, acompanhado por estatísticas importantes como o número total de 'Tiles' e 'Antenas' no arranjo. Se houver colisões e a opção estiver ativa, informações detalhadas sobre elas são mostradas em uma seção expansível. Adicionalmente, esta seção oferece uma funcionalidade para 'Baixar Imagem do Layout', que salva a visualização do canvas como um arquivo PNG. O usuário pode escolher o tema da imagem (claro ou Dracula) e optar por incluir ou não os eixos na imagem exportada.

Ao lado do 'Gerador de Layout', encontra-se a seção 'Padrão de Feixe Simulado'. Esta ferramenta calcula e exibe o padrão de radiação do arranjo de antenas gerado. O usuário pode ajustar o 'Ângulo Phi' (de 0° a 90°) através de um controle deslizante (slider) e um campo de entrada numérica. Também é possível selecionar a 'Escala Y' para a visualização do gráfico, escolhendo entre 'dB' (decibéis) ou 'Linear'. O padrão de feixe é renderizado utilizando a biblioteca Plotly.js, fornecendo uma representação gráfica da diretividade do arranjo. Um indicador de status informa o usuário sobre o processo de carregamento dos dados e cálculo do padrão. Os dados de campo elétrico (E-field), necessários para esta simulação, são carregados dinamicamente de arquivos CSV específicos para cada valor de ângulo Phi. Estes arquivos (nomeados como `efield_phi_X.csv`) estão localizados no diretório `data/efield_phi_data/` e são gerados a partir de um arquivo CSV mais completo (`rE_table_vivaldi.csv`) por meio de um script Python de pré-processamento (`python/preprocess_efield_csv.py`).

Abaixo dessas seções principais, a aplicação apresenta um 'Mapa Interativo'. Construído com a biblioteca Leaflet, este mapa é centralizado nas coordenadas geográficas do radiotelescópio BINGO. Ele oferece camadas de base comutáveis, permitindo ao usuário alternar entre uma visualização de 'Satélite (ESRI)' e um 'Mapa (OSM)', além de uma camada de sobreposição para 'Nomes e Limites (ESRI)'. Um marcador fixo indica a localização do BINGO Central. A principal funcionalidade desta seção é permitir que o usuário adicione marcadores de estação no mapa, seja clicando diretamente em um local desejado ou selecionando um dos arranjos pré-definidos de uma lista suspensa. Estes arranjos pré-definidos são carregados a partir do arquivo `data/posicoes_outriggers.csv`. Os marcadores de estação adicionados são arrastáveis, e suas coordenadas (latitude, longitude e altitude) são atualizadas dinamicamente; a altitude é obtida através de uma consulta a uma API externa (Open-Meteo) sempre que um marcador é adicionado ou movido. O painel de informações do mapa exibe as coordenadas da estação selecionada, a distância dessa estação ao BINGO Central e a distância do cursor do mouse ao BINGO. Uma lista detalhada das coordenadas das estações adicionadas também é fornecida, com opções para centralizar o mapa em uma estação específica ou removê-la da lista. Diferentes cores de ícones são usadas para distinguir o marcador do BINGO (azul), estações padrão (vermelho) e a estação atualmente ativa ou selecionada (verde).

Finalmente, a seção de 'Exportação (Estrutura OSKAR)' permite ao usuário obter os dados do layout gerado e das posições das estações em formatos compatíveis com o software OSKAR. Esta seção contém quatro campos de texto (textareas) que exibem: `layout_wgs84.txt` (coordenadas WGS84 das estações selecionadas no mapa), `position.txt` (coordenadas WGS84 fixas do BINGO Central), `station/layout.txt` (coordenadas XY relativas dos centros dos tiles do arranjo gerado na primeira seção) e `station/tile/layout.txt` (coordenadas XY relativas das 64 antenas dentro de um único tile, que possui um layout interno fixo). Cada campo de texto é acompanhado por um botão 'Copiar' para facilitar a transferência dos dados. Além disso, há uma funcionalidade para 'Baixar Layout (ZIP)', que agrupa todos esses arquivos de texto em um arquivo ZIP. O usuário pode, opcionalmente, especificar um nome para o arquivo ZIP antes de baixá-lo.

A aplicação é construída predominantemente com HTML, CSS e JavaScript. A lógica JavaScript é modularizada em vários arquivos, incluindo `main.js` para inicialização e orquestração, `bingo_layouts.js` para a matemática da geração de layouts, `generator.js` para a interface do gerador de layout, `map.js` para o mapa interativo, `export.js` para a funcionalidade de exportação, e `beam_pattern.js` (que interage com um Web Worker, chamado `beam_worker.js`, para cálculos em background) para a simulação do padrão de feixe. Diversas bibliotecas de terceiros são utilizadas, como Leaflet para o mapa, Plotly.js para gráficos, JSZip para a criação de arquivos ZIP, e FileSaver.js para o download de arquivos. O projeto também inclui scripts Python (`python/bingo_layouts.py`, `python/preprocess_efield_csv.py`, e `python/telescope_gen.py`), que são usados para tarefas de apoio, como o pré-processamento de dados e desenvolvimento ou teste da lógica de geração de layouts em um ambiente Python.
